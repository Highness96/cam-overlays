<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Tip Goal Overlay</title>

<style>
body{
  margin:0;
  overflow:hidden;
  background:transparent;
  font-family:Arial, sans-serif;
  color:#fff;
}

#container{
  position:absolute;
  top:20px;
  left:20px;
  width:700px;                 /* slightly wider so it never clips */
}

/* HEADER */
#header{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:16px;
  margin-bottom:10px;
}

#title{
  font-size:26px;
  font-weight:900;
  color:#ffffff;
  text-shadow:0 0 6px rgba(0,0,0,0.85);
  white-space:nowrap;          /* prevent wrapping */
  flex:1;                      /* title uses remaining space */
  overflow:hidden;
  text-overflow:ellipsis;      /* if it ever gets too long */
}

#counter{
  font-size:22px;
  font-weight:900;
  color:#ffffff;
  text-shadow:0 0 6px rgba(0,0,0,0.85);

  white-space:nowrap;          /* IMPORTANT: keeps 0 / 50000 on one line */
  flex:0 0 auto;
  min-width:230px;             /* IMPORTANT: enough room for big numbers */
  text-align:right;
}

/* BAR */
#progressWrap{
  position:relative;
  height:40px;
  background:rgba(0,0,0,0.6);
  border-radius:20px;
  overflow:hidden;
  border:2px solid rgba(255,255,255,0.5);
}

#progressBar{
  height:100%;
  width:0%;
  background:linear-gradient(90deg,#ffffff,#dddddd);
  transition:width .45s ease;
}

/* GLOW ON TIP */
.glow{
  animation:pulse 1s ease-out;
}
@keyframes pulse{
  0%{box-shadow:0 0 0 transparent}
  50%{box-shadow:0 0 20px rgba(255,255,255,0.9)}
  100%{box-shadow:0 0 0 transparent}
}
</style>
</head>

<body>
<div id="container">
  <div id="header">
    <div id="title">Tip Goal: 50000 tokens</div>
    <div id="counter">0 / 50000</div>
  </div>

  <div id="progressWrap">
    <div id="progressBar"></div>
  </div>
</div>

<script>
const TARGET = 50000;
let current = 0;

const counter = document.getElementById("counter");
const bar = document.getElementById("progressBar");
const wrap = document.getElementById("progressWrap");

function update(){
  const pct = Math.min((current / TARGET) * 100, 100);
  bar.style.width = pct + "%";
  counter.textContent = `${current} / ${TARGET}`;
}

window.addEventListener("message", e=>{
  const d = e.data || {};
  if(d.type !== "tip") return;

  current += Number(d.amount || 0);
  if(current > TARGET) current = TARGET;

  update();

  wrap.classList.remove("glow");
  void wrap.offsetWidth;
  wrap.classList.add("glow");
});

update();
</script>
</body>
</html>
