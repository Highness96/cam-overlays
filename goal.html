<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Tip Goal Overlay</title>

<style>
:root{
  --purple:#a855f7;
  --purple2:#c084fc;
  --bg:rgba(20,10,40,0.78);
  --glow:rgba(168,85,247,.95);
}

body{
  margin:0;
  overflow:hidden;
  background:transparent;
  font-family:Arial, sans-serif;
}

#container{
  position:absolute;
  top:20px;
  left:20px;
  width:650px;
}

/* HEADER */
#header{
  display:flex;
  align-items:center;
  justify-content:space-between;
  margin-bottom:10px;
}

#title{
  font-size:28px;
  font-weight:900;
  color:var(--purple2);
  text-shadow:0 0 8px var(--glow);
}

#counter{
  font-size:22px;
  font-weight:900;
  color:var(--purple);
  min-width:170px;
  text-align:right;
  text-shadow:0 0 8px var(--glow);
}

/* BAR */
#progressWrap{
  position:relative;
  height:40px;
  background:var(--bg);
  border-radius:20px;
  overflow:hidden;
  border:2px solid rgba(168,85,247,.5);
  box-shadow:0 0 14px rgba(168,85,247,.5);
}

#progressBar{
  height:100%;
  width:0%;
  background:linear-gradient(90deg,#7c3aed,var(--purple),var(--purple2));
  transition:width .45s ease;
}

/* GLOW ANIMATION */
.glow{
  animation:pulse 1s ease-out;
}
@keyframes pulse{
  0%{box-shadow:0 0 0 transparent}
  50%{box-shadow:0 0 30px var(--glow)}
  100%{box-shadow:0 0 0 transparent}
}
</style>
</head>

<body>
<div id="container">
  <div id="header">
    <div id="title">Tip Goal: 50000 tokens</div>
    <div id="counter">0 / 50000</div>
  </div>

  <div id="progressWrap">
    <div id="progressBar"></div>
  </div>
</div>

<script>
const TARGET = 50000;
let current = 0;

const counter = document.getElementById("counter");
const bar = document.getElementById("progressBar");
const wrap = document.getElementById("progressWrap");

function update(){
  const pct = Math.min((current / TARGET) * 100, 100);
  bar.style.width = pct + "%";
  counter.textContent = `${current} / ${TARGET}`;
}

window.addEventListener("message", e=>{
  const d = e.data || {};
  if(d.type !== "tip") return;

  current += Number(d.amount || 0);
  if(current > TARGET) current = TARGET;

  update();

  wrap.classList.remove("glow");
  void wrap.offsetWidth;
  wrap.classList.add("glow");
});

update();
</script>
</body>
</html>
